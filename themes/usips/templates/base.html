<!DOCTYPE html>
<html lang="{% if lang %}{{ lang }}{% else %}en{% endif %}">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}{{ config.title }}{% endblock %}</title>
  <link rel="stylesheet" href="{{ get_url(path='main.css') | safe }}?v={{ config.extra.build_timestamp }}">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">

  {% block extra_head %}{% endblock %}
</head>

<body>
  {% include "macros/header.html" %}

  <main>
    {% block content %}{% endblock %}
  </main>

  {% include "macros/footer.html" %}


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const mobileToggle = document.getElementById('mobile-menu-toggle');
      const mainNav = document.getElementById('main-nav');
      const submenuToggles = document.querySelectorAll('.submenu-toggle');

      // Toggle main mobile menu
      mobileToggle.addEventListener('click', function () {
        mainNav.classList.toggle('mobile-open');
        this.classList.toggle('active');
      });

      // Toggle submenus on mobile
      submenuToggles.forEach(function (toggle) {
        toggle.addEventListener('click', function (e) {
          if (window.innerWidth <= 768) {
            e.preventDefault();
            const parentLi = this.closest('li');
            parentLi.classList.toggle('submenu-open');
          }
        });
      });

      // Close mobile menu when clicking outside
      document.addEventListener('click', function (e) {
        if (!mainNav.contains(e.target) && !mobileToggle.contains(e.target)) {
          mainNav.classList.remove('mobile-open');
          mobileToggle.classList.remove('active');
        }
      });

      // Handle window resize
      window.addEventListener('resize', function () {
        if (window.innerWidth > 768) {
          mainNav.classList.remove('mobile-open');
          mobileToggle.classList.remove('active');
          document.querySelectorAll('.has-submenu').forEach(function (item) {
            item.classList.remove('submenu-open');
          });
        }
      });
    });
  </script>

</body>

</html>